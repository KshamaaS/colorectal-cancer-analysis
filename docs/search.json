[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Colorectal Cancer Risk Analysis",
    "section": "",
    "text": "Colorectal cancer remains one of the most prevalent and preventable cancers worldwide, with lifestyle and dietary factors playing significant roles in disease development. Traditional diagnostic and risk assessment methods have relied heavily on clinical parameters and statistical analyses. However, with the availability of comprehensive health data, a more visual and interactive approach can be developed to understand the complex interplay of risk factors.\nThis project centers around a dataset containing health information from over one thousand real patients, with confidentiality carefully maintained throughout the analysis. Each participant is classified as either at risk or not at risk for colorectal cancer. The dataset includes measurements across eleven key variables: age, gender, body mass index, lifestyle patterns, family history of colorectal cancer, and detailed nutritional markers including carbohydrate, protein, and fat intake, as well as vitamin A, vitamin C, and iron levels. Our primary goal is to explore this dataset through interactive visualization techniques to understand which factors are most predictive of cancer risk and to determine whether these patterns can be effectively communicated through data-driven storytelling.\nWe chose this topic because it presents a perfect opportunity to bridge the gap between data visualization techniques and real-world health data. Understanding the relationship between lifestyle factors, nutrition, and disease risk is an exciting and meaningful application of data science. It also provides an opportunity to apply sophisticated visualization techniques, such as parallel coordinates plots, interactive filtering, and dynamic variable selection, which are essential skills in modern data communication.\nOur research questions focus on understanding how multivariate health data can be visualized to draw meaningful insights. Specifically, we aim to explore several key questions. First, which demographic and lifestyle factors show the strongest associations with colorectal cancer risk, and how can we identify these patterns from the dataset? Second, how do nutritional intake patterns differ between at-risk and no-risk groups, and are there specific dietary combinations that appear protective or harmful? Third, can interactive visualizations reveal complex multivariate relationships that traditional statistical charts might miss? Fourth, how does family history amplify or modify the effects of other risk factors? Finally, what role do individual vitamins and minerals play in cancer risk when considered alongside broader lifestyle patterns? These questions guide our visualization design and analytical approach throughout the project.\nThe project addresses several technical challenges inherent in working with high-dimensional health data. One such challenge is visual complexity, as displaying all one thousand participants across multiple variables simultaneously can create overwhelming clutter. We address this through adjustable opacity controls and strategic default variable selections. Additionally, the interactive nature requires balancing functionality with usability, ensuring that users can explore patterns without becoming lost in the complexity.\nOur methodology involves creating story-driven visualizations that transform raw data into actionable insights. The centerpiece is an interactive parallel coordinates plot that represents each participant as a line threading through multiple variable axes, with color encoding risk status. Users can dynamically select which variables to display, adjust line transparency, and filter specific value ranges by dragging on axes. This interactive capability transforms passive data consumption into active exploration, empowering viewers to discover patterns and relationships on their own.\nThroughout the project, we provide extensive interactivity to help interpret the results and communicate our findings effectively. Health data is complex and multi-dimensional, so clear, intuitive visualizations are essential to uncover meaningful patterns. Our approach emphasizes narrative-driven analysis over simple data display, ensuring that each visualization tells a specific story about colorectal cancer risk factors rather than merely presenting numbers.\nOur aim is not only to gain insights into the classification of cancer risk but also to showcase the power of modern interactive visualization techniques in the analysis of health data. This project allows us to apply data visualization principles while contributing to a better understanding of how visual analytics can be applied to solve problems in public health communication and risk awareness.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Exploratory Data Analysis for Colorectal Cancer</span>"
    ]
  },
  {
    "objectID": "CRC_EDA.html",
    "href": "CRC_EDA.html",
    "title": "Colorectal Cancer: Exploratory Data Analysis",
    "section": "",
    "text": "Setup and Data Loading\nShow code\n# Load required libraries\nlibrary(tidyverse)      # Data manipulation and visualization\nlibrary(ggplot2)        # Advanced plotting\nlibrary(gridExtra)      # Multiple plots\nlibrary(corrplot)       # Correlation plots\nlibrary(GGally)         # Pair plots\nlibrary(knitr)          # Table formatting\nlibrary(kableExtra)     # Enhanced tables\nlibrary(scales)         # Scale functions\nlibrary(viridis)        # Color palettes\nlibrary(pROC)           # ROC curves\n\n# Custom theme for professional plots\ntheme_story &lt;- function() {\n  theme_minimal(base_size = 12) +\n    theme(\n      plot.title = element_text(face = \"bold\", size = 16, hjust = 0),\n      plot.subtitle = element_text(size = 11, color = \"gray30\", margin = ggplot2::margin(b = 15)),\n      plot.caption = element_text(size = 9, hjust = 0, color = \"gray40\", \n                                  margin = ggplot2::margin(t = 15), lineheight = 1.3),\n      legend.position = \"right\",\n      panel.grid.minor = element_blank(),\n      plot.margin = ggplot2::margin(20, 20, 20, 20)\n    )\n}\n\n# Set default theme\ntheme_set(theme_story())\n\n# Color palette for risk levels\nrisk_colors &lt;- c(\"0\" = \"#27AE60\", \"1\" = \"#E74C3C\")\nlifestyle_colors &lt;- c(\"Active\" = \"#27AE60\", \"Moderate Exercise\" = \"#3498DB\", \n                      \"Sedentary\" = \"#F39C12\", \"Smoker\" = \"#E74C3C\")\nShow code\n# Load the dataset ONCE\ndf &lt;- read_csv(\"data/crc_dataset.csv\", show_col_types = FALSE)\n\n# Create a version with clean column names for plotting\ndata &lt;- df |&gt;\n  rename(\n    Pre_existing_Conditions = `Pre-existing Conditions`,\n    Carbohydrates = `Carbohydrates (g)`,\n    Proteins = `Proteins (g)`,\n    Fats = `Fats (g)`,\n    Vitamin_A = `Vitamin A (IU)`,\n    Vitamin_C = `Vitamin C (mg)`,\n    Iron = `Iron (mg)`\n  )\n\n# Display basic information\ncat(\"Dataset loaded successfully!\\n\")\n\n\nDataset loaded successfully!\n\n\nShow code\ncat(sprintf(\"Shape: %d rows × %d columns\\n\", nrow(df), ncol(df)))\n\n\nShape: 1000 rows × 15 columns",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Exploratory Data Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_EDA.html#dataset-structure",
    "href": "CRC_EDA.html#dataset-structure",
    "title": "Colorectal Cancer: Exploratory Data Analysis",
    "section": "Dataset Structure",
    "text": "Dataset Structure\n\n\nShow code\nlibrary(DT)\nlibrary(htmlwidgets)\nlibrary(htmltools)\n\n# Convert CRC_Risk to labels for display\ndata_display &lt;- data %&gt;%\n  mutate(CRC_Risk = ifelse(CRC_Risk == 0, \"No Risk\", \"Positive Risk\"))\n\ncustom_colors &lt;- c(\"#2ecc71\", \"#e74c3c\", \"#3498db\", \"#f39c12\", \"#9b59b6\")\n\n# Complete compact CSS including pagination and controls\ncompact_css &lt;- \"\n  /* Header cells */\n  .dataTables_wrapper .dataTable thead th {\n    font-size: 10px !important;\n    padding: 3px 5px !important;\n    line-height: 1.2 !important;\n  }\n  \n  /* Data cells */\n  .dataTables_wrapper .dataTable tbody td {\n    font-size: 10px !important;\n    padding: 2px 4px !important;\n    line-height: 1.2 !important;\n  }\n  \n  /* Filter text inputs */\n  .dataTables_wrapper thead input[type='search'],\n  .dataTables_wrapper thead input[type='text'] {\n    font-size: 10px !important;\n    padding: 2px 4px !important;\n    height: 20px !important;\n    min-height: 20px !important;\n    box-sizing: border-box !important;\n  }\n  \n  /* Filter dropdowns */\n  .dataTables_wrapper thead select {\n    font-size: 10px !important;\n    padding: 2px 4px !important;\n    height: 20px !important;\n    box-sizing: border-box !important;\n  }\n  \n  /* Filter row padding */\n  .dataTables_wrapper thead tr:last-child th {\n    padding: 2px 3px !important;\n  }\n  \n  /* Pagination and controls */\n  .dataTables_wrapper .dataTables_length,\n  .dataTables_wrapper .dataTables_filter,\n  .dataTables_wrapper .dataTables_info,\n  .dataTables_wrapper .dataTables_paginate {\n    font-size: 10px !important;\n  }\n  \n  /* Show entries dropdown */\n  .dataTables_wrapper .dataTables_length select {\n    font-size: 10px !important;\n    padding: 2px 4px !important;\n    height: 20px !important;\n  }\n  \n  /* Search box */\n  .dataTables_wrapper .dataTables_filter input {\n    font-size: 10px !important;\n    padding: 2px 4px !important;\n    height: 20px !important;\n  }\n  \n  /* Pagination buttons */\n  .dataTables_wrapper .dataTables_paginate .paginate_button {\n    font-size: 10px !important;\n    padding: 2px 6px !important;\n    margin: 0 1px !important;\n  }\n  \n  /* Info text (Showing 1 to 25...) */\n  .dataTables_wrapper .dataTables_info {\n    padding-top: 4px !important;\n    font-size: 10px !important;\n  }\n\"\n\ninteractive_table &lt;- tagList(\n  tags$style(HTML(compact_css)),\n  datatable(\n    data_display,\n    colnames = c('Age', 'Gender', 'BMI', 'Lifestyle', 'Ethnicity', \n                 'Family History', 'Pre-existing Conditions', \n                 'Carbohydrates (g)', 'Proteins (g)', 'Fats (g)', \n                 'Vitamin A (IU)', 'Vitamin C (mg)', 'Iron (mg)', 'CRC Risk'),\n    options = list(\n      pageLength = 25,\n      scrollX = TRUE,\n      scrollCollapse = TRUE,\n      fixedHeader = TRUE,\n      autoWidth = TRUE,\n      columnDefs = list(\n        list(visible = FALSE, targets = 0),  # Hide Participant_ID\n        list(searchable = FALSE, targets = 14)  # Disable filter for CRC Risk\n      )\n    ),\n    filter = \"top\",\n    caption = \"Colorectal Cancer Dataset\",\n    rownames = FALSE,\n    class = \"cell-border stripe hover compact\"\n  ) |&gt;\n  formatRound(\n    columns = c(\"Age\", \"BMI\", \"Carbohydrates\", \"Proteins\", \n                \"Fats\", \"Vitamin_A\", \"Vitamin_C\", \"Iron\"),\n    digits = 2\n  ) |&gt;\n  formatStyle(\"CRC_Risk\",\n    backgroundColor = styleEqual(\n      c(\"No Risk\", \"Positive Risk\"), \n      c(custom_colors[1], custom_colors[2])\n    ),\n    color = \"white\", \n    fontWeight = \"bold\", \n    textAlign = \"center\"\n  ) |&gt;\n  formatStyle(\"Family_History_CRC\",\n    backgroundColor = styleEqual(c(\"No\", \"Yes\"), c(custom_colors[1], custom_colors[2])),\n    color = \"white\", fontWeight = \"bold\", textAlign = \"center\"\n  ) |&gt;\n  formatStyle(\"BMI\",\n    backgroundColor = styleInterval(c(18.5, 25, 30),\n      c(custom_colors[4], custom_colors[1], custom_colors[4], custom_colors[2]))\n  ) |&gt;\n  formatStyle(\"Carbohydrates\",\n    backgroundColor = styleInterval(c(225, 325),\n      c(custom_colors[2], custom_colors[1], custom_colors[2])),\n    color = \"white\"\n  ) |&gt;\n  formatStyle(\"Proteins\",\n    backgroundColor = styleInterval(c(50, 100),\n      c(custom_colors[2], custom_colors[1], custom_colors[2])),\n    color = \"white\"\n  ) |&gt;\n  formatStyle(\"Fats\",\n    backgroundColor = styleInterval(c(44, 77),\n      c(custom_colors[2], custom_colors[1], custom_colors[2])),\n    color = \"white\"\n  ) |&gt;\n  formatStyle(\"Vitamin_A\",\n    backgroundColor = styleInterval(c(2000, 3000),\n      c(custom_colors[2], custom_colors[1], custom_colors[2])),\n    color = \"white\"\n  ) |&gt;\n  formatStyle(\"Vitamin_C\",\n    backgroundColor = styleInterval(c(75, 200),\n      c(custom_colors[2], custom_colors[1], custom_colors[2])),\n    color = \"white\"\n  ) |&gt;\n  formatStyle(\"Iron\",\n    backgroundColor = styleInterval(c(8, 18),\n      c(custom_colors[2], custom_colors[1], custom_colors[2])),\n    color = \"white\"\n  )\n)\n\ninteractive_table",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Exploratory Data Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_EDA.html#missing-values-analysis",
    "href": "CRC_EDA.html#missing-values-analysis",
    "title": "Colorectal Cancer: Exploratory Data Analysis",
    "section": "Missing Values Analysis",
    "text": "Missing Values Analysis\n\n\nShow code\n# Missing values summary\nmissing_summary &lt;- df |&gt;\n  summarise(across(everything(), ~sum(is.na(.)))) |&gt;\n  pivot_longer(everything(), names_to = \"Column\", values_to = \"Missing_Count\") |&gt;\n  mutate(Percentage = round(Missing_Count / nrow(df) * 100, 2)) |&gt;\n  filter(Missing_Count &gt; 0) |&gt;\n  arrange(desc(Missing_Count))\n\nif(nrow(missing_summary) &gt; 0) {\n  kable(missing_summary, \n        caption = \"Missing Values Summary\",\n        align = c('l', 'r', 'r')) |&gt;\n    kable_styling(bootstrap_options = c(\"striped\", \"hover\"))\n} else {\n  cat(\"No missing values detected!\\n\")\n}\n\n\nNo missing values detected!",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Exploratory Data Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_EDA.html#target-variable-distribution",
    "href": "CRC_EDA.html#target-variable-distribution",
    "title": "Colorectal Cancer: Exploratory Data Analysis",
    "section": "Target Variable Distribution",
    "text": "Target Variable Distribution\n\n\nShow code\n# CRC Risk distribution\ncrc_summary &lt;- df |&gt;\n  count(CRC_Risk) |&gt;\n  mutate(\n    Percentage = round(n / sum(n) * 100, 2),\n    Label = ifelse(CRC_Risk == 0, \"No Risk\", \"At Risk\")\n  )\n\nkable(crc_summary, \n      caption = \"CRC Risk Distribution\",\n      col.names = c(\"CRC Risk\", \"Count\", \"Percentage (%)\", \"Label\"),\n      align = c('c', 'r', 'r', 'l')) |&gt;\n  kable_styling(bootstrap_options = c(\"striped\", \"hover\"))\n\n\n\nCRC Risk Distribution\n\n\nCRC Risk\nCount\nPercentage (%)\nLabel\n\n\n\n\n0\n845\n84.5\nNo Risk\n\n\n1\n155\n15.5\nAt Risk\n\n\n\n\n\nShow code\ncat(sprintf(\"\\nCRC Risk Rate: %.2f%%\\n\", mean(df$CRC_Risk) * 100))\n\n\n\nCRC Risk Rate: 15.50%",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Exploratory Data Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_EDA.html#descriptive-statistics",
    "href": "CRC_EDA.html#descriptive-statistics",
    "title": "Colorectal Cancer: Exploratory Data Analysis",
    "section": "Descriptive Statistics",
    "text": "Descriptive Statistics\n\n\nShow code\n# Numerical variables statistics\nnumerical_vars &lt;- df |&gt;\n  select(where(is.numeric), -Participant_ID, -CRC_Risk)\n\nsummary_stats &lt;- numerical_vars |&gt;\n  pivot_longer(everything(), names_to = \"Variable\") |&gt;\n  group_by(Variable) |&gt;\n  summarise(\n    Mean = mean(value, na.rm = TRUE),\n    SD = sd(value, na.rm = TRUE),\n    Min = min(value, na.rm = TRUE),\n    Q1 = quantile(value, 0.25, na.rm = TRUE),\n    Median = median(value, na.rm = TRUE),\n    Q3 = quantile(value, 0.75, na.rm = TRUE),\n    Max = max(value, na.rm = TRUE)\n  )\n\nkable(summary_stats, \n      digits = 2,\n      caption = \"Descriptive Statistics - Numerical Variables\") |&gt;\n  kable_styling(bootstrap_options = c(\"striped\", \"hover\")) |&gt;\n  scroll_box(width = \"100%\")\n\n\n\n\nDescriptive Statistics - Numerical Variables\n\n\nVariable\nMean\nSD\nMin\nQ1\nMedian\nQ3\nMax\n\n\n\n\nAge\n52.44\n15.91\n25.0\n39.00\n53.0\n66.00\n79\n\n\nBMI\n26.80\n4.79\n18.6\n22.50\n27.0\n31.00\n35\n\n\nCarbohydrates (g)\n275.87\n71.57\n150.0\n218.00\n276.0\n334.25\n399\n\n\nFats (g)\n69.58\n17.44\n40.0\n55.00\n70.0\n85.00\n99\n\n\nIron (mg)\n12.69\n4.36\n5.0\n9.00\n12.8\n16.52\n20\n\n\nProteins (g)\n85.05\n20.31\n50.0\n67.00\n86.0\n103.00\n119\n\n\nVitamin A (IU)\n5922.54\n1705.42\n3020.0\n4410.75\n5905.0\n7410.50\n8997\n\n\nVitamin C (mg)\n75.95\n26.04\n30.0\n53.00\n77.0\n99.00\n119\n\n\n\n\n\n\n\n\nShow code\nnumerical_vars |&gt;\n  pivot_longer(everything(), names_to = \"Variable\", values_to = \"Value\") |&gt;\n  ggplot(aes(x = Variable, y = Value)) +\n  geom_boxplot(fill = \"skyblue\", alpha = 0.7, outlier.color = \"red\", outlier.alpha = 0.5) +\n  facet_wrap(~Variable, scales = \"free\", ncol = 4) +\n  labs(title = \"Distribution of Numerical Variables\",\n       x = NULL, y = \"Value\") +\n  theme_minimal(base_size = 12) +\n  theme(axis.text.x = element_blank(),\n        axis.ticks.x = element_blank(),\n        panel.grid.major.x = element_blank())",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Exploratory Data Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_EDA.html#overview-visualizations",
    "href": "CRC_EDA.html#overview-visualizations",
    "title": "Colorectal Cancer: Exploratory Data Analysis",
    "section": "Overview Visualizations",
    "text": "Overview Visualizations\nDistribution of Numeric Variables\n\n\nShow code\nnumerical_vars |&gt;\n  pivot_longer(everything()) |&gt;\n  ggplot(aes(x = value)) +\n  geom_histogram(bins = 30, fill = \"skyblue\", color = \"white\") +\n  facet_wrap(~name, scales = \"free\") +\n  theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\nDistribution of Categorical Variables\n\n\nShow code\ncat_vars &lt;- c('Gender', 'Lifestyle', 'Ethnicity', \n              'Family_History_CRC', 'Pre-existing Conditions')\n\ndf |&gt;\n  select(all_of(cat_vars)) |&gt;\n  pivot_longer(everything()) |&gt;\n  count(name, value) |&gt;\n  ggplot(aes(x = value, y = n)) +\n  geom_col(fill = \"coral\") +\n  geom_text(aes(label = n), hjust = 1.2, size = 3.5, color = \"white\", fontface = \"bold\") +\n  facet_wrap(~name, scales = \"free\") +\n  coord_flip() +\n  labs(x = NULL, y = \"Count\") +\n  theme_minimal(base_size = 14) +\n  theme(panel.grid.major.y = element_blank())",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Exploratory Data Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_EDA.html#the-nutrition-divide",
    "href": "CRC_EDA.html#the-nutrition-divide",
    "title": "Colorectal Cancer: Exploratory Data Analysis",
    "section": "The Nutrition Divide",
    "text": "The Nutrition Divide\nINSIGHT: Stark differences in nutritional patterns between risk groups.\n\n\nShow code\nnutrition_profiles &lt;- function(data) {\n  \n  # Prepare nutrition data\n  nutrition_long &lt;- data %&gt;%\n    mutate(Risk_Group = ifelse(CRC_Risk == 1, \"CRC Risk\", \"No Risk\")) %&gt;%\n    select(Risk_Group, Carbohydrates, Proteins, Fats, \n           Vitamin_A, Vitamin_C, Iron) %&gt;%\n    pivot_longer(cols = -Risk_Group, \n                names_to = \"Nutrient\", \n                values_to = \"Amount\")\n  \n  # Calculate means and create categories\n  nutrition_summary &lt;- nutrition_long %&gt;%\n    group_by(Risk_Group, Nutrient) %&gt;%\n    summarise(\n      Mean = mean(Amount, na.rm = TRUE),\n      SD = sd(Amount, na.rm = TRUE),\n      .groups = \"drop\"\n    ) %&gt;%\n    mutate(\n      Category = case_when(\n        Nutrient %in% c(\"Vitamin_A\", \"Vitamin_C\", \"Iron\") ~ \"Micronutrients\",\n        TRUE ~ \"Macronutrients\"\n      ),\n      Nutrient = str_replace(Nutrient, \"_\", \" \")\n    )\n  \n  # Create the plot\n  p &lt;- ggplot(nutrition_summary, aes(x = reorder(Nutrient, Mean), \n                                      y = Mean, fill = Risk_Group)) +\n    geom_bar(stat = \"identity\", position = position_dodge(width = 0.8), \n             width = 0.7, alpha = 0.9) +\n    geom_errorbar(aes(ymin = Mean - SD/2, ymax = Mean + SD/2),\n                  position = position_dodge(width = 0.8), width = 0.25,\n                  alpha = 0.6) +\n    facet_wrap(~Category, scales = \"free\", ncol = 1) +\n    coord_flip() +\n    scale_fill_manual(values = c(\"No Risk\" = \"#27AE60\", \"CRC Risk\" = \"#E74C3C\")) +\n    labs(\n      title = \"What Separates Risk Groups\",\n      subtitle = \"CRC risk group shows distinct nutritional deficiencies in protective micronutrients\",\n      x = \"\",\n      y = \"Average Daily Intake\",\n      fill = \"Risk Status\",\n      caption = str_wrap(\"KEY INSIGHT: Individuals at risk show significantly lower intake of Vitamin C and Iron - both known to have protective effects. Macronutrient differences suggest poor overall diet quality. This points to specific, actionable dietary interventions.\", 100)\n    )\n  \n  return(p)\n}\n\nplot1 &lt;- nutrition_profiles(data)\nprint(plot1)\n\n\n\n\n\n\n\n\n\nThis visualization compares nutritional intake patterns between individuals with and without colorectal cancer risk. The graph is divided into two panels showing macronutrients and micronutrients, with green bars representing the no-risk group and red bars showing the at-risk group. While macronutrient differences are relatively modest across carbohydrates, proteins, and fats, the micronutrient panel reveals striking disparities. The at-risk group shows substantially lower intake of Vitamin C and Iron, both known for their protective effects against cancer. Vitamin A also shows noticeable differences. These patterns suggest that targeted dietary interventions focusing on increasing protective micronutrients through fruits, vegetables, and fortified foods could significantly reduce cancer risk.",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Exploratory Data Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_EDA.html#the-bmi-lifestyle-heatmap",
    "href": "CRC_EDA.html#the-bmi-lifestyle-heatmap",
    "title": "Colorectal Cancer: Exploratory Data Analysis",
    "section": "The BMI-Lifestyle Heatmap",
    "text": "The BMI-Lifestyle Heatmap\nINSIGHT: Combined effect of body weight and activity level\n\n\nShow code\nbmi_lifestyle_interaction &lt;- function(data) {\n  \n  # Create BMI categories\n  data_plot &lt;- data %&gt;%\n    mutate(\n      BMI_Category = cut(BMI, \n                        breaks = c(17, 18.5, 25, 30, 36),\n                        labels = c(\"Underweight\", \"Normal\", \"Overweight\", \"Obese\")),\n      Risk_Status = factor(CRC_Risk, levels = c(0, 1))\n    )\n  \n  # Calculate risk percentages\n  heatmap_data &lt;- data_plot %&gt;%\n    filter(!is.na(BMI_Category)) %&gt;%\n    group_by(BMI_Category, Lifestyle) %&gt;%\n    summarise(\n      risk_rate = mean(CRC_Risk == 1) * 100,\n      n = n(),\n      .groups = \"drop\"\n    ) %&gt;%\n    filter(n &gt;= 5)\n  \n  # Create heatmap\n  p &lt;- ggplot(heatmap_data, aes(x = Lifestyle, y = BMI_Category, fill = risk_rate)) +\n    geom_tile(color = \"white\", size = 1.5) +\n    geom_text(aes(label = sprintf(\"%.1f%%\\n(n=%d)\", risk_rate, n)), \n              color = \"white\", fontface = \"bold\", size = 3.5) +\n    scale_fill_gradient2(low = \"#27AE60\", mid = \"#F39C12\", high = \"#E74C3C\",\n                        midpoint = 30, name = \"Risk Rate (%)\") +\n    labs(\n      title = \"Risk hotspots created by BMI and Lifestyle\",\n      subtitle = \"Obesity + Sedentary lifestyle shows highest risk; Active lifestyle protects even at higher BMI\",\n      x = \"Lifestyle Pattern\",\n      y = \"BMI Category\",\n      caption = str_wrap(\"KEY INSIGHT: The deadliest combination is Obesity + Smoking/Sedentary lifestyle. However, active individuals show lower risk even at higher BMI levels, suggesting that physical activity can partially offset weight-related risk. Prevention should target the top-right quadrant.\", 100)\n    ) +\n    theme(\n      axis.text.x = element_text(angle = 45, hjust = 1),\n      panel.grid = element_blank()\n    )\n  \n  return(p)\n}\n\nplot2 &lt;- bmi_lifestyle_interaction(data)\nprint(plot2)\n\n\n\n\n\n\n\n\n\nThis heatmap reveals how body mass index and lifestyle choices interact to create cancer risk hotspots. Each cell shows the risk rate for a specific BMI-lifestyle combination, with colors ranging from green (low risk) to red (high risk). The deadliest combination appears in the top-right corner where obese smokers show fifty-three percent risk, while obese sedentary individuals reach thirty-six percent. However, the encouraging finding is that active individuals maintain low risk even in the overweight and obese categories, demonstrating that physical activity provides substantial protection regardless of body weight. This suggests that becoming more active may be the most impactful single intervention for cancer prevention.",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Exploratory Data Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_EDA.html#the-family-history-insights",
    "href": "CRC_EDA.html#the-family-history-insights",
    "title": "Colorectal Cancer: Exploratory Data Analysis",
    "section": "The Family History Insights",
    "text": "The Family History Insights\nINSIGHT: How genetics and lifestyle interact\n\n\nShow code\nfamily_history_factor &lt;- function(data) {\n  \n  # Calculate risk by lifestyle and family history\n  family_data &lt;- data %&gt;%\n    group_by(Lifestyle, Family_History_CRC) %&gt;%\n    summarise(\n      risk_rate = mean(CRC_Risk == 1) * 100,\n      n = n(),\n      .groups = \"drop\"\n    )\n  \n  # Create grouped bar plot\n  p &lt;- ggplot(family_data, aes(x = reorder(Lifestyle, risk_rate), \n                                y = risk_rate, \n                                fill = Family_History_CRC)) +\n    geom_bar(stat = \"identity\", position = position_dodge(width = 0.8), \n             width = 0.7) +\n    geom_text(aes(label = sprintf(\"%.1f%%\", risk_rate)),\n              position = position_dodge(width = 0.8),\n              vjust = -0.5, size = 3.5, fontface = \"bold\") +\n    scale_fill_manual(values = c(\"No\" = \"#3498DB\", \"Yes\" = \"#E74C3C\"),\n                     name = \"Family History\\nof CRC\") +\n    labs(\n      title = \"Family History Magnifies Lifestyle Risk\",\n      subtitle = \"Those with family history show 1.5-2x higher risk across all lifestyle types\",\n      x = \"Lifestyle Pattern\",\n      y = \"CRC Risk Rate (%)\",\n      caption = str_wrap(\"KEY INSIGHT: Family history consistently doubles the baseline risk, but lifestyle still matters enormously. Even with genetic predisposition, active individuals have lower risk than sedentary people without family history. Genetics loads the gun, but lifestyle pulls the trigger.\", 100)\n    ) +\n    coord_cartesian(ylim = c(0, max(family_data$risk_rate) * 1.15))\n  \n  return(p)\n}\n\nplot3 &lt;- family_history_factor(data)\nprint(plot3)\n\n\n\n\n\n\n\n\n\nThis grouped bar chart demonstrates how family history of colorectal cancer amplifies risk across all lifestyle patterns. The blue bars represent individuals without family history, while red bars show those with family history. Family history consistently doubles baseline risk, with the red bars standing taller across every lifestyle category. However, the crucial insight emerges when comparing specific groups: active individuals with family history show only twenty percent risk, significantly lower than the thirty percent risk seen in smokers without family history. This reveals that while genetics create vulnerability, lifestyle choices ultimately determine outcomes. The metaphor holds true: genetics loads the gun, but lifestyle pulls the trigger.",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Exploratory Data Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_EDA.html#the-vitamin-influence",
    "href": "CRC_EDA.html#the-vitamin-influence",
    "title": "Colorectal Cancer: Exploratory Data Analysis",
    "section": "The Vitamin Influence",
    "text": "The Vitamin Influence\nINSIGHT: Protective effects of micronutrients\n\n\nShow code\nvitamin_protection &lt;- function(data) {\n  \n  # Prepare data for PCA - select nutritional variables and remove missing values\n  pca_data &lt;- data %&gt;%\n    select(Carbohydrates, Proteins, Fats, Vitamin_A, Vitamin_C, Iron, CRC_Risk) %&gt;%\n    na.omit()\n  \n  # Perform PCA on nutritional variables\n  pca_result &lt;- prcomp(pca_data[, 1:6], scale. = TRUE, center. = TRUE)\n  \n  # Extract PC scores and add risk status\n  pca_scores &lt;- as.data.frame(pca_result$x[, 1:2])\n  pca_scores$CRC_Risk &lt;- factor(pca_data$CRC_Risk, \n                                levels = c(0, 1),\n                                labels = c(\"No Risk\", \"CRC Risk\"))\n  \n  # Extract variable loadings for arrows\n  pca_loadings &lt;- as.data.frame(pca_result$rotation[, 1:2])\n  pca_loadings$Variable &lt;- rownames(pca_loadings)\n  \n  # Calculate variance explained\n  var_explained &lt;- summary(pca_result)$importance[2, 1:2] * 100\n  \n  # Create PCA biplot\n  p &lt;- ggplot(pca_scores, aes(x = PC1, y = PC2, color = CRC_Risk)) +\n    geom_point(alpha = 0.6, size = 2.5) +\n    stat_ellipse(aes(fill = CRC_Risk), geom = \"polygon\", \n                 alpha = 0.1, level = 0.68, show.legend = FALSE) +\n    # Add loading arrows\n    geom_segment(data = pca_loadings,\n                 aes(x = 0, y = 0, xend = PC1 * 4, yend = PC2 * 4),\n                 arrow = arrow(length = unit(0.3, \"cm\")),\n                 color = \"black\", size = 0.8, alpha = 0.7,\n                 inherit.aes = FALSE) +\n    geom_text(data = pca_loadings,\n              aes(x = PC1 * 4.5, y = PC2 * 4.5, label = Variable),\n              color = \"black\", fontface = \"bold\", size = 3.5,\n              inherit.aes = FALSE) +\n    scale_color_manual(values = c(\"No Risk\" = \"#27AE60\", \"CRC Risk\" = \"#E74C3C\")) +\n    scale_fill_manual(values = c(\"No Risk\" = \"#27AE60\", \"CRC Risk\" = \"#E74C3C\")) +\n    labs(\n      title = \"Nutritional Profiles Separate Risk Groups\",\n      subtitle = sprintf(\"Micronutrient patterns distinguish cancer risk groups (PC1: %.1f%%, PC2: %.1f%%)\",\n                        var_explained[1], var_explained[2]),\n      x = sprintf(\"Principal Component 1 (%.1f%% variance)\", var_explained[1]),\n      y = sprintf(\"Principal Component 2 (%.1f%% variance)\", var_explained[2]),\n      color = \"Risk Status\",\n      caption = str_wrap(\"KEY INSIGHT: The PCA biplot shows clear separation between risk groups along nutritional dimensions. Vitamin C, Vitamin A, and Iron point away from the high-risk cluster (red), indicating these micronutrients are protective. Individuals with higher levels of these nutrients (upper-right quadrant) show lower cancer risk. Simple dietary changes focusing on fruits, vegetables, and fortified foods could significantly reduce population risk.\", 100)\n    ) +\n    theme_minimal() +\n    theme(\n      plot.title = element_text(face = \"bold\", size = 14),\n      plot.subtitle = element_text(size = 11),\n      legend.position = \"top\",\n      plot.margin = ggplot2::margin(10, 10, 10, 10)\n    )\n  \n  return(p)\n}\n\nplot4 &lt;- vitamin_protection(data)\nprint(plot4)\n\n\n\n\n\n\n\n\n\nThis principal component analysis biplot reveals how nutritional patterns distinguish individuals by cancer risk status. Each dot represents a participant, colored by risk status (green for no risk, red for CRC risk), while arrows indicate the direction and strength of each nutrient’s contribution. The two principal components together explain thirty-six percent of variation in nutritional profiles. Critically, Vitamin C, Vitamin A, and Iron arrows point away from the concentrated red cluster, indicating that individuals with higher intake of these protective micronutrients occupy different nutritional space than those at risk. The clear separation suggests that targeted dietary interventions emphasizing these micronutrients could effectively reduce cancer risk.",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Exploratory Data Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_EDA.html#the-gender-difference",
    "href": "CRC_EDA.html#the-gender-difference",
    "title": "Colorectal Cancer: Exploratory Data Analysis",
    "section": "The Gender Difference",
    "text": "The Gender Difference\nINSIGHT: How risk patterns differ between men and women\n\n\nShow code\ngender_analysis &lt;- function(data) {\n  \n  # Calculate risk by gender and lifestyle\n  gender_data &lt;- data %&gt;%\n    mutate(Age_Group = cut(Age, breaks = c(24, 40, 55, 81),\n                          labels = c(\"25-40\", \"41-55\", \"56-80\"))) %&gt;%\n    group_by(Gender, Age_Group, Lifestyle) %&gt;%\n    summarise(\n      risk_rate = mean(CRC_Risk == 1) * 100,\n      n = n(),\n      .groups = \"drop\"\n    ) %&gt;%\n    filter(n &gt;= 5)\n  \n  # Create faceted plot\n  p &lt;- ggplot(gender_data, aes(x = Age_Group, y = risk_rate, \n                                group = Lifestyle, color = Lifestyle)) +\n    geom_line(size = 1.2) +\n    geom_point(size = 3) +\n    facet_wrap(~Gender) +\n    scale_color_manual(values = lifestyle_colors) +\n    labs(\n      title = \"Different Risk Trajectories for Men and Women\",\n      subtitle = \"Men show earlier risk escalation; women's risk accelerates later\",\n      x = \"Age Group\",\n      y = \"CRC Risk Rate (%)\",\n      color = \"Lifestyle\",\n      caption = str_wrap(\"KEY INSIGHT: Men generally show higher baseline risk and earlier onset, particularly in the 41-55 age group. Women's risk increases more dramatically after 55, possibly linked to hormonal changes. This suggests gender-specific screening recommendations may be warranted.\", 100)\n    )\n  \n  return(p)\n}\n\nplot6 &lt;- gender_analysis(data)\nprint(plot6)\n\n\n\n\n\n\n\n\n\nThis faceted line plot reveals distinct gender differences in colorectal cancer risk trajectories across age groups. Men generally display higher baseline risk and earlier onset, with notable escalation in the forty-one to fifty-five age range, particularly among smokers who reach thirty-five percent risk. Women maintain relatively lower risk in younger and middle age groups, but experience dramatic acceleration after age fifty-five, with female smokers jumping from thirty-one percent to forty-seven percent risk in the oldest age bracket. This pattern suggests possible hormonal influences, as women’s risk surge coincides with typical menopausal timing. These gender-specific trajectories indicate that screening protocols may benefit from tailored approaches.",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Exploratory Data Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_Numerical_Variable_Analysis.html",
    "href": "CRC_Numerical_Variable_Analysis.html",
    "title": "Colorectal Cancer: Numerical Variable Analysis",
    "section": "",
    "text": "Setup and Data Loading\n\n\nShow code\n# Load libraries\nlibrary(tidyverse)\nlibrary(GGally)\nlibrary(corrplot)\nlibrary(viridis)\n\n\n\n\nShow code\ncrc &lt;- read_csv(\"data/crc_dataset.csv\", show_col_types = FALSE)\n\n# Make sure CRC_Risk is a factor (for coloring)\ncrc &lt;- crc |&gt;\n  mutate(CRC_Risk = as.factor(CRC_Risk))\n\n\n\n\nShow code\nnum_vars &lt;- crc |&gt;\n  select(\n    Age, BMI,\n    `Carbohydrates (g)`, `Proteins (g)`, `Fats (g)`,\n    `Vitamin A (IU)`, `Vitamin C (mg)`, `Iron (mg)`\n  )\n\n\n\n\nInteractive Scatterplot: Age vs BMI by CRC Risk\n\n\nShow code\n# Interactive scatterplot with plotly\nlibrary(plotly)\nlibrary(dplyr)\n\nscatter_data &lt;- crc |&gt;\n  select(Age, BMI, CRC_Risk)\n\nplot_ly(\n  data = scatter_data,\n  x = ~Age,\n  y = ~BMI,\n  color = ~CRC_Risk,\n  type = \"scatter\",\n  mode = \"markers\",\n  marker = list(size = 8, opacity = 0.7)\n) |&gt;\n  layout(\n    title = \"Interactive Scatterplot: Age vs BMI by CRC Risk\",\n    xaxis = list(title = \"Age (years)\"),\n    yaxis = list(title = \"BMI\"),\n    legend = list(title = list(text = \"CRC Risk\"))\n  )\n\n\n\n\n\n\nAcross the age spectrum, BMI remains highly variable, and the two risk groups appear largely intermixed. However, there is a subtle trend indicating that individuals who fall into the higher age and higher BMI ranges are slightly more likely to belong to the CRC Risk 1 category. While this pattern is not strong enough to create a clear visual boundary between the groups, it does suggest that a combination of older age and elevated BMI may contribute modestly to increased colorectal cancer risk. Overall, the scatterplot indicates that Age and BMI alone are not strong discriminators but may play a small associative role when considered together.\n\n\nScatterplot Matrix\n\n\nShow code\n# Scatterplot matrix (GGally)\nlibrary(GGally)\n\n# Combine numeric vars + CRC_Risk for coloring\nspm_data &lt;- crc |&gt;\n  select(\n    Age, BMI,\n    `Carbohydrates (g)`, `Proteins (g)`, `Fats (g)`,\n    CRC_Risk\n  )\n\nGGally::ggpairs(\n  data = spm_data,\n  columns = 1:5,    # numeric columns\n  aes(color = CRC_Risk, alpha = 0.7),\n  progress = FALSE\n)\n\n\n\n\n\n\n\n\n\nThe scatterplot matrix further reinforces this observation. Pairwise relationships between the numerical variables reveal extremely weak linear correlations, with coefficients close to zero for almost all combinations. The density plots along the diagonal demonstrate that the distributions of Age, BMI, macronutrients, and micronutrients are broadly similar for both CRC risk categories. The scatter panels appear as diffuse clouds without any directional structure, indicating an absence of meaningful bivariate patterns. Together, these results imply that single-variable or pairwise relationships are not sufficient to distinguish between low- and high-risk individuals.\n\n\nPCA Biplot\n\n\nShow code\nlibrary(factoextra)\n\npca_res &lt;- prcomp(num_vars, scale. = TRUE, center = TRUE)\n\nfviz_pca_biplot(\n  pca_res,\n  geom.ind  = \"point\",\n  col.ind   = crc$CRC_Risk,   # color points by CRC_Risk\n  palette   = \"Dark2\",\n  addEllipses = TRUE,\n  label     = \"var\",          # show only variable labels\n  repel     = TRUE\n) +\n  labs(title = \"PCA Biplot of Nutritional and Demographic Variables\")\n\n\n\n\n\n\n\n\n\nThe PCA biplot supports this conclusion by showing that the first two principal components capture only a modest proportion of the variance in the dataset, with nutrients and BMI primarily driving the variation rather than CRC risk status. Individuals from both risk groups cluster tightly together in the central region of the PCA space, and the ellipses surrounding each group overlap almost entirely. Although certain variables such as Vitamin A, Vitamin C, and BMI contribute visibly to the principal components, these contributions do not translate into meaningful separation between risk categories.",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Numerical Variable Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_Categorical_Variable_Analysis.html",
    "href": "CRC_Categorical_Variable_Analysis.html",
    "title": "Colorectal Cancer: Categorical Variable Analysis",
    "section": "",
    "text": "Setup and Data Loading\n\n\nShow code\n# Load required libraries\nlibrary(tidyverse)      # Data manipulation and visualization\nlibrary(ggplot2)        # Advanced plotting\nlibrary(gridExtra)      # Multiple plots\nlibrary(corrplot)       # Correlation plots\nlibrary(GGally)         # Pair plots\nlibrary(knitr)          # Table formatting\nlibrary(kableExtra)     # Enhanced tables\nlibrary(scales)         # Scale functions\nlibrary(viridis)        # Color palettes\nlibrary(pROC)           # ROC curves\nlibrary(randomForest)   # Random forest\n\n# Set theme for all plots\ntheme_set(theme_minimal(base_size = 12))\n\n\n\n\nShow code\n# Load the dataset\ndf &lt;- read_csv(\"data/crc_dataset.csv\", show_col_types = FALSE)\n\n\n\n\nShow code\ncat_vars &lt;- c(\n  \"Gender\",\n  \"Lifestyle\",\n  \"Ethnicity\",\n  \"Family_History_CRC\",\n  \"Pre-existing Conditions\"\n)\n\n\n\n\nPart 1: Lifestyle Factors Analysis\n\n\nShow code\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(gridExtra)\nlibrary(scales)\nlibrary(viridis)\nlibrary(ggalluvial)  # For alluvial diagrams\nlibrary(ggmosaic)    # For mosaic plots\n\n\n\n\nAlluvial Diagram\n\n\nShow code\n# Prepare data for alluvial plot\nalluvial_data &lt;- df |&gt;\n  mutate(CRC_Risk_Label = ifelse(CRC_Risk == 0, \"No Risk\", \"At Risk\")) |&gt;\n  count(Gender, Lifestyle, Family_History_CRC, CRC_Risk_Label) |&gt;\n  filter(n &gt; 5)  # Filter small groups for clarity\n\nggplot(alluvial_data,\n       aes(axis1 = Gender, axis2 = Lifestyle, \n           axis3 = Family_History_CRC, axis4 = CRC_Risk_Label,\n           y = n)) +\n  geom_alluvium(aes(fill = CRC_Risk_Label), alpha = 0.7) +\n  geom_stratum(alpha = 0.5) +\n  geom_text(stat = \"stratum\", aes(label = after_stat(stratum)), size = 3) +\n  scale_fill_manual(values = c(\"No Risk\" = \"#2ecc71\", \"At Risk\" = \"#e74c3c\")) +\n  scale_x_discrete(limits = c(\"Gender\", \"Lifestyle\", \"Family History\", \"CRC Risk\"),\n                   expand = c(0.15, 0.05)) +\n  labs(title = \"Flow of Categorical Variables to CRC Risk\",\n       subtitle = \"Width of flows represents number of individuals\",\n       y = \"Count\", fill = \"CRC Risk\") +\n  theme_minimal(base_size = 12) +\n  theme(plot.title = element_text(face = \"bold\", size = 16),\n        legend.position = \"bottom\",\n        axis.text.y = element_blank(),\n        axis.ticks = element_blank(),\n        panel.grid = element_blank())\n\n\n\n\n\n\n\n\nFigure 7.1: Alluvial Flow Diagram: Categorical Variables to CRC Risk\n\n\n\n\n\nThe alluvial diagram shows how individuals flow from gender to lifestyle to family history and ultimately to CRC risk. The most visible pattern is the strong movement of smokers into the At Risk group, matching the higher CRC risk seen later. Active and moderately active groups show predominantly green flows into No Risk, reflecting their lower-risk profiles. Similarly, individuals with Family History = Yes show a clear red path toward At Risk, whereas those with no family history mostly end up in No Risk. Gender flows look nearly balanced, indicating minimal impact relative to lifestyle and hereditary factors.\n\n\nGrouped Risk Comparison\n\n\nShow code\n# Prepare data for grouped comparison\ncomparison_data &lt;- df |&gt;\n  select(all_of(cat_vars), CRC_Risk) |&gt;\n  pivot_longer(cols = all_of(cat_vars), \n               names_to = \"Variable\", \n               values_to = \"Category\") |&gt;\n  group_by(Variable, Category) |&gt;\n  summarise(\n    Risk_Rate = mean(CRC_Risk) * 100,\n    n = n(),\n    .groups = \"drop\"\n  ) |&gt;\n  mutate(Label = paste0(Variable, \": \", Category)) |&gt;\n  arrange(desc(Risk_Rate))\n\nggplot(comparison_data, aes(x = reorder(Label, Risk_Rate), \n                            y = Risk_Rate, fill = Variable)) +\n  geom_col(color = \"black\", linewidth = 0.3) +\n  geom_text(aes(label = sprintf(\"%.1f%% (n=%d)\", Risk_Rate, n)), \n            hjust = -0.1, size = 3) +\n  coord_flip() +\n  scale_fill_viridis_d(option = \"D\") +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +\n  labs(title = \"CRC Risk Rates Ranked Across All Categorical Variables\",\n       subtitle = \"Which categories have highest risk?\",\n       x = NULL, y = \"CRC Risk Rate (%)\",\n       fill = \"Variable\") +\n  theme_minimal(base_size = 11) +\n  theme(plot.title = element_text(face = \"bold\", size = 16),\n        legend.position = \"bottom\",\n        panel.grid.major.y = element_blank())\n\n\n\n\n\n\n\n\nFigure 8.1: Ranked CRC Risk Rates Across All Categories\n\n\n\n\n\nThe ranked bar plot quantifies CRC risk across categories. Smokers have the highest risk at 37.8%, far above any other group. Family history follows at 23.5%, while hypertension shows 19.5%. Ethnicity categories range from 11.8% (Asian) to 19.2% (Hispanic). Gender differences remain small, with female at 16.5% and male at 14.6%. Meanwhile, healthy lifestyle behaviors show much lower risk: Active (10.4%), Moderate Exercise (8%), and Sedentary (5.8%). This reinforces the dominance of lifestyle and family history as risk factors.\n\n\nOdds Ratio Forest Plot\n\n\nShow code\n# Calculate odds ratios with confidence intervals\ncalculate_or &lt;- function(var_name) {\n  df |&gt;\n    select(all_of(var_name), CRC_Risk) |&gt;\n    rename(Variable = 1) |&gt;\n    group_by(Variable) |&gt;\n    summarise(\n      cases = sum(CRC_Risk == 1),\n      controls = sum(CRC_Risk == 0),\n      total = n(),\n      .groups = \"drop\"\n    ) |&gt;\n    mutate(\n      odds = cases / controls,\n      VarName = var_name\n    )\n}\n\n# Get baseline odds (overall rate)\nbaseline_odds &lt;- sum(df$CRC_Risk == 1) / sum(df$CRC_Risk == 0)\n\n# Calculate for all variables\nor_data &lt;- map_dfr(cat_vars, calculate_or) |&gt;\n  mutate(\n    or = odds / baseline_odds,\n    log_or = log(or),\n    # Approximate 95% CI (simplified)\n    se = sqrt(1/cases + 1/controls),\n    ci_lower = exp(log_or - 1.96 * se),\n    ci_upper = exp(log_or + 1.96 * se),\n    Label = paste0(VarName, \": \", Variable),\n    Significance = case_when(\n      ci_lower &gt; 1 ~ \"Increased Risk\",\n      ci_upper &lt; 1 ~ \"Decreased Risk\",\n      TRUE ~ \"No Significant Effect\"\n    )\n  )\n\nggplot(or_data, aes(x = or, y = reorder(Label, or))) +\n  geom_vline(xintercept = 1, linetype = \"dashed\", color = \"gray40\", linewidth = 1) +\n  geom_errorbarh(aes(xmin = ci_lower, xmax = ci_upper, color = Significance),\n                 height = 0.3, linewidth = 1) +\n  geom_point(aes(color = Significance), size = 4) +\n  scale_color_manual(values = c(\"Increased Risk\" = \"#e74c3c\",\n                                \"Decreased Risk\" = \"#2ecc71\",\n                                \"No Significant Effect\" = \"#95a5a6\")) +\n  scale_x_log10(breaks = c(0.25, 0.5, 1, 2, 4, 8)) +\n  labs(title = \"Forest Plot: Odds Ratios for CRC Risk\",\n       subtitle = \"Reference line at OR = 1 (no effect). Bars show 95% confidence intervals.\",\n       x = \"Odds Ratio (log scale)\", y = NULL,\n       color = \"Effect\") +\n  theme_minimal(base_size = 12) +\n  theme(plot.title = element_text(face = \"bold\", size = 16),\n        legend.position = \"bottom\",\n        panel.grid.major.y = element_blank())\n\n\n\n\n\n\n\n\nFigure 9.1: Odds Ratios for CRC Risk by Category\n\n\n\n\n\nThe forest plot highlights the magnitude of each factor’s effect on CRC risk. Smokers show the highest odds ratio (OR &gt; 3), meaning their odds of CRC are more than triple the reference level. Individuals with Family History = Yes also exhibit substantially elevated odds (OR &gt; 2). In contrast, protective behaviors appear on the left side of the plot: Active, Moderate Exercise, and Sedentary groups all show reduced odds (OR &lt; 1), with sedentary individuals having one of the lowest OR values in the plot. Most other categories, including ethnicity and gender, lie close to OR = 1, indicating no strong effect.\n\n\nStacked Percentage Bars\n\n\nShow code\n# Prepare comprehensive stacked data\nstacked_data &lt;- df |&gt;\n  select(all_of(cat_vars), CRC_Risk) |&gt;\n  pivot_longer(cols = all_of(cat_vars), \n               names_to = \"Variable\", \n               values_to = \"Category\") |&gt;\n  mutate(Full_Label = paste0(Variable, \"\\n\", Category)) |&gt;\n  count(Full_Label, Variable, CRC_Risk) |&gt;\n  group_by(Full_Label) |&gt;\n  mutate(\n    Total = sum(n),\n    Percentage = n / Total * 100,\n    CRC_Risk_Label = ifelse(CRC_Risk == 0, \"No Risk\", \"At Risk\")\n  ) |&gt;\n  ungroup() |&gt;\n  arrange(Variable, Full_Label)\n\nggplot(stacked_data, aes(x = reorder(Full_Label, -Total), \n                         y = n, fill = CRC_Risk_Label)) +\n  geom_col(position = \"fill\", color = \"black\", linewidth = 0.2) +\n  geom_text(aes(label = sprintf(\"%.0f%%\", Percentage)), \n            position = position_fill(vjust = 0.5), \n            size = 3, fontface = \"bold\", color = \"white\") +\n  scale_fill_manual(values = c(\"No Risk\" = \"#2ecc71\", \"At Risk\" = \"#e74c3c\")) +\n  scale_y_continuous(labels = percent) +\n  coord_flip() +\n  labs(title = \"CRC Risk Distribution Across All Categorical Variables\",\n       subtitle = \"Proportional view of risk within each category\",\n       x = NULL, y = \"Proportion\",\n       fill = \"CRC Risk\") +\n  theme_minimal(base_size = 11) +\n  theme(plot.title = element_text(face = \"bold\", size = 16),\n        legend.position = \"bottom\",\n        panel.grid.major.y = element_blank())\n\n\n\n\n\n\n\n\nFigure 10.1: Comprehensive Stacked View: All Categories and CRC Risk\n\n\n\n\n\nThe stacked bar chart visualizes the proportion of at-risk individuals within each category. Smokers again stand out, with 38% of the group classified at risk. Those with Family History = Yes have 23% at risk, and individuals with Hypertension show 20% at risk. Groups with lower risk include Active (10%), Moderate Exercise (8%), Sedentary (6%), and Family History = No (7%). These proportional differences match the risk rates and odds ratios, emphasizing how lifestyle and genetic components strongly shape CRC outcomes.\n\n\nMosaic Plot\n\n\nShow code\nlibrary(dplyr)\nlibrary(vcd)\n\n# Use your CRC data frame (df) in the same way SleepStudy used SS\ncrc_factors &lt;- df |&gt;\n  # Make CRC_Risk a factor with labels\n  mutate(\n    CRC_Risk = factor(ifelse(CRC_Risk == 0, \"No Risk\", \"At Risk\"))\n  ) |&gt;\n  # Turn all character columns into factors\n  mutate(across(where(is.character), as.factor))\n\n# Keep only factor variables you want in the mosaic pairs\ncats &lt;- crc_factors |&gt;\n  select(where(is.factor))\n\n# Build an n-way contingency table of all factor variables\ntab_all &lt;- xtabs(~ ., data = cats)\n\n# Mosaic pairs: pairwise mosaics in off-diagonals, names on diagonal\npairs(\n  tab_all,\n  shade    = TRUE,                    # red/blue residual shading\n  gp       = vcd::shading_Friendly,   # Friendly red/blue palette\n  labeling = vcd::labeling_values,\n  main     = \"Mosaic Pairs: CRC Dataset (all factor variables)\"\n)\n\n# Pairwise associations using Cramér's V \npairV &lt;- combn(names(cats), 2, simplify = FALSE, FUN = function(v) {\n  tb &lt;- table(cats[[v[1]]], cats[[v[2]]])\n  V  &lt;- suppressWarnings(vcd::assocstats(tb)$cramer)\n  p  &lt;- suppressWarnings(chisq.test(tb)$p.value)\n  data.frame(var1 = v[1], var2 = v[2], cramerV = V, p_value = p)\n}) |&gt;\n  bind_rows() |&gt;\n  arrange(desc(cramerV), p_value)\n\n\n\n\n\n\n\n\nFigure 11.1: Mosaic Pairs: CRC Dataset (all factor variables)\n\n\n\n\n\nThe mosaic plot shows the strength of association between categorical variables and CRC risk. The strongest shading appears for Lifestyle × CRC_Risk, which aligns with its highest Cramér’s V value (0.360) and extremely low p-value. Family History × CRC_Risk also shows noticeable shading, reflecting meaningful dependence. In contrast, Gender × CRC_Risk displays the weakest association, supported by its lowest Cramér’s V (0.026) and non-significant p-value. The mosaic plot visually confirms the patterns seen in the other analyses: lifestyle and family history drive the most meaningful associations.\n\n\nChi-Square Test Results\n\n\nShow code\n# Perform chi-square tests\nchisq_results &lt;- map_dfr(cat_vars, function(var) {\n  test_table &lt;- table(df[[var]], df$CRC_Risk)\n  chisq_test &lt;- chisq.test(test_table)\n  \n  tibble(\n    Variable = var,\n    ChiSquare = chisq_test$statistic,\n    P_Value = chisq_test$p.value,\n    Significant = ifelse(chisq_test$p.value &lt; 0.05, \"Yes\", \"No\")\n  )\n})\n\nkable(chisq_results, \n      digits = 4,\n      caption = \"Statistical Significance Tests\") |&gt;\n  kable_styling(bootstrap_options = c(\"striped\", \"hover\"))\n\n\n\nStatistical Significance Tests\n\n\nVariable\nChiSquare\nP_Value\nSignificant\n\n\n\n\nGender\n0.5539\n0.4567\nNo\n\n\nLifestyle\n129.7749\n0.0000\nYes\n\n\nEthnicity\n5.4933\n0.1390\nNo\n\n\nFamily_History_CRC\n47.7365\n0.0000\nYes\n\n\nPre-existing Conditions\n6.0551\n0.1090\nNo\n\n\n\n\n\nThe chi-square results formally show that Lifestyle and Family History are the only categorical variables significantly associated with CRC risk (p &lt; 0.001 for both). Gender (p = 0.4567), Ethnicity (p = 0.1390), and Pre-existing Conditions (p = 0.1090) do not meet significance thresholds. This statistical pattern aligns directly with the forest plot, ranked bar plot, and stacked percentages.\nConclusion: Across all analyses, Lifestyle (particularly smoking) and Family History of CRC consistently emerge as the strongest contributors to CRC risk. Smokers show the highest CRC rate (37.8%) and significantly elevated odds (OR &gt; 3). Individuals with a family history of CRC show a high rate (23.5%) and increased odds (OR &gt; 2). These findings are supported by proportional comparisons, risk rankings, and mosaic associations. In contrast, gender, ethnicity, and most pre-existing conditions show weak or nonsignificant effects. The dataset therefore suggests that behavioral and hereditary factors are the primary determinants of CRC risk.",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Categorical Variable Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_Variable_Analysis.html",
    "href": "CRC_Variable_Analysis.html",
    "title": "Colorectal Cancer: Variable Analysis",
    "section": "",
    "text": "Interactive Plots\nShow code\n#Load the libraries\nlibrary(plotly)\nlibrary(tidyverse)\nlibrary(htmlwidgets)\nlibrary(GGally)\nLoad the data from the csv file\nShow code\ndata &lt;- read.csv(\"data/crc_dataset.csv\")\n\n# Rename columns to match\ndata &lt;- data |&gt; rename(\n  Pre_existing_Conditions = Pre.existing.Conditions,\n  Carbohydrates = Carbohydrates..g.,\n  Proteins = Proteins..g.,\n  Fats = Fats..g.,\n  Vitamin_A = Vitamin.A..IU.,\n  Vitamin_C = Vitamin.C..mg.,\n  Iron = Iron..mg.\n)",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Interactive Plot Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_Variable_Analysis.html#comprehensive-multi-dimensional-exploration.",
    "href": "CRC_Variable_Analysis.html#comprehensive-multi-dimensional-exploration.",
    "title": "Colorectal Cancer: Variable Analysis",
    "section": "Comprehensive Multi-Dimensional Exploration.",
    "text": "Comprehensive Multi-Dimensional Exploration.\nThis plot allows users to select which variables to display on X and Y axes, with color, size, and filtering options for all other variables. This single plot can show any combination of relationships in our dataset.\n\n\nShow code\ncreate_selectable_3d_explorer &lt;- function(data) {\n  \n  # Prepare data\n  plot_data &lt;- data %&gt;%\n    mutate(\n      Risk_Status = factor(CRC_Risk, levels = c(0, 1), \n                           labels = c(\"No Risk\", \"CRC Risk\"))\n    )\n  \n  # Create base plot with Vitamin C as default Z axis\n  p &lt;- plot_ly(\n    data = plot_data,\n    x = ~Age,\n    y = ~BMI,\n    z = ~Vitamin_C,\n    type = \"scatter3d\",\n    mode = \"markers\",\n    color = ~Risk_Status,\n    colors = c(\"No Risk\" = \"#27AE60\", \"CRC Risk\" = \"#E74C3C\"),\n    size = ~Iron,\n    sizes = c(5, 15),\n    marker = list(\n      opacity = 0.6,\n      line = list(color = \"white\", width = 0.5)\n    ),\n    text = ~paste(\n      \"&lt;b&gt;Participant\", Participant_ID, \"&lt;/b&gt;&lt;br&gt;\",\n      \"Age:\", Age, \"| Gender:\", Gender, \"&lt;br&gt;\",\n      \"BMI:\", round(BMI, 1), \"| Lifestyle:\", Lifestyle, \"&lt;br&gt;\",\n      \"Family History:\", Family_History_CRC, \"&lt;br&gt;\",\n      \"Carbs:\", round(Carbohydrates, 1), \"g | Proteins:\", round(Proteins, 1), \"g&lt;br&gt;\",\n      \"Fats:\", round(Fats, 1), \"g&lt;br&gt;\",\n      \"Vitamin A:\", round(Vitamin_A, 0), \"IU | Vitamin C:\", round(Vitamin_C, 1), \"mg&lt;br&gt;\",\n      \"Iron:\", round(Iron, 1), \"mg&lt;br&gt;\",\n      \"&lt;b&gt;Status:\", Risk_Status, \"&lt;/b&gt;\"\n    ),\n    hoverinfo = \"text\"\n  ) %&gt;%\n    layout(\n      scene = list(\n        xaxis = list(title = \"Age (years)\"),\n        yaxis = list(title = \"BMI\"),\n        zaxis = list(title = \"Vitamin C (mg)\")\n      ),\n      margin = list(t = 100, b = 60, l = 60, r = 60),\n      \n      # Add dropdown menu to select Z-axis variable\n      updatemenus = list(\n        list(\n          type = \"dropdown\",\n          active = 0,\n          x = 0.5,\n          xanchor = \"center\",\n          y = 1.12,\n          yanchor = \"top\",\n          bgcolor = \"#f0f0f0\",\n          bordercolor = \"#666\",\n          borderwidth = 2,\n          buttons = list(\n            list(\n              label = \"Z-axis: Vitamin C (mg)\",\n              method = \"update\",\n              args = list(\n                list(z = list(plot_data$Vitamin_C)),\n                list(scene = list(zaxis = list(title = \"Vitamin C (mg)\")))\n              )\n            ),\n            list(\n              label = \"Z-axis: Iron (mg)\",\n              method = \"update\",\n              args = list(\n                list(z = list(plot_data$Iron)),\n                list(scene = list(zaxis = list(title = \"Iron (mg)\")))\n              )\n            ),\n            list(\n              label = \"Z-axis: Vitamin A (IU)\",\n              method = \"update\",\n              args = list(\n                list(z = list(plot_data$Vitamin_A)),\n                list(scene = list(zaxis = list(title = \"Vitamin A (IU)\")))\n              )\n            ),\n            list(\n              label = \"Z-axis: Carbohydrates (g)\",\n              method = \"update\",\n              args = list(\n                list(z = list(plot_data$Carbohydrates)),\n                list(scene = list(zaxis = list(title = \"Carbohydrates (g)\")))\n              )\n            ),\n            list(\n              label = \"Z-axis: Proteins (g)\",\n              method = \"update\",\n              args = list(\n                list(z = list(plot_data$Proteins)),\n                list(scene = list(zaxis = list(title = \"Proteins (g)\")))\n              )\n            ),\n            list(\n              label = \"Z-axis: Fats (g)\",\n              method = \"update\",\n              args = list(\n                list(z = list(plot_data$Fats)),\n                list(scene = list(zaxis = list(title = \"Fats (g)\")))\n              )\n            )\n          )\n        )\n      ),\n      \n      annotations = list(\n        list(\n          text = \"Select Z-axis variable:  \",\n          x = 0.35,\n          y = 1.12,\n          xref = \"paper\",\n          yref = \"paper\",\n          xanchor = \"right\",\n          showarrow = FALSE,\n          font = list(size = 13)\n        )\n      )\n    )\n  \n  return(p)\n}\n\n\n\n\nShow code\nexplorer_plot &lt;- create_selectable_3d_explorer(data)\nexplorer_plot\n\n\n\n\n\n\nThis three-dimensional interactive visualization explores the relationship between age, body mass index, and Vitamin C intake in determining colorectal cancer risk. Each point represents an individual participant, colored by risk status (green for no risk, red for CRC risk), with point size indicating iron intake levels. Users can click and drag to rotate the three-dimensional space, revealing clusters and patterns from multiple angles. Hovering over any point displays complete participant information including all demographic factors, lifestyle characteristics, and nutritional variables. This spatial representation helps identify how these three critical factors interact to create risk profiles across the population.",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Interactive Plot Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_Variable_Analysis.html#interactive-risk-heatmap.",
    "href": "CRC_Variable_Analysis.html#interactive-risk-heatmap.",
    "title": "Colorectal Cancer: Variable Analysis",
    "section": "Interactive Risk Heatmap.",
    "text": "Interactive Risk Heatmap.\n\n\nShow code\ncreate_clean_risk_heatmap &lt;- function(data) {\n  \n  # Create meaningful categories\n  heatmap_data &lt;- data %&gt;%\n    mutate(\n      Age_Group = cut(Age, breaks = c(0, 40, 55, 70, 100),\n                     labels = c(\"25-40\", \"41-55\", \"56-70\", \"71-80\")),\n      BMI_Cat = cut(BMI, breaks = c(0, 25, 30, 100),\n                   labels = c(\"Normal\", \"Overweight\", \"Obese\")),\n      Combined = paste(Age_Group, BMI_Cat, sep = \" | \")\n    ) %&gt;%\n    group_by(Combined, Lifestyle) %&gt;%\n    summarise(\n      risk_rate = mean(CRC_Risk == 1) * 100,\n      count = n(),\n      avg_vitc = mean(Vitamin_C),\n      avg_iron = mean(Iron),\n      .groups = \"drop\"\n    ) %&gt;%\n    filter(count &gt;= 5) %&gt;%\n    mutate(\n      hover_text = paste0(\n        \"&lt;b&gt;Risk: \", round(risk_rate, 1), \"%&lt;/b&gt;&lt;br&gt;\",\n        \"Group: \", Combined, \"&lt;br&gt;\",\n        \"Lifestyle: \", Lifestyle, \"&lt;br&gt;\",\n        \"Sample: \", count, \" people&lt;br&gt;\",\n        \"Avg Vit C: \", round(avg_vitc, 1), \" mg&lt;br&gt;\",\n        \"Avg Iron: \", round(avg_iron, 1), \" mg\"\n      )\n    )\n  \n  plot_ly(\n    heatmap_data,\n    x = ~Lifestyle,\n    y = ~Combined,\n    z = ~risk_rate,\n    type = \"heatmap\",\n    colors = colorRamp(c(\"#27AE60\", \"#F39C12\", \"#E74C3C\")),\n    text = ~hover_text,\n    hoverinfo = \"text\",\n    colorbar = list(title = \"Risk %\", len = 0.7)\n  ) %&gt;%\n    layout(\n      title = \"CRC Risk Heatmap: Age-BMI Groups × Lifestyle&lt;br&gt;&lt;sub&gt;Hover for details including vitamin levels&lt;/sub&gt;\",\n      xaxis = list(title = \"Lifestyle Type\", tickangle = -45),\n      yaxis = list(title = \"Age Group | BMI Category\"),\n      margin = list(l = 150, t = 100, r = 100, b = 100)\n    )\n}\n\n\n\n\nShow code\nrisk_heatmap &lt;- create_clean_risk_heatmap(data)\nrisk_heatmap\n\n\n\n\n\n\nThis interactive heatmap displays colorectal cancer risk rates across combinations of age groups, BMI categories, and lifestyle patterns. Each cell represents a specific demographic-lifestyle combination, with color intensity indicating risk percentage ranging from green (low risk) to red (high risk). The vertical axis shows twelve age-BMI combinations while the horizontal axis displays four lifestyle types. Users can hover over any cell to view exact risk rates, sample sizes, and average vitamin intake levels for that group. This categorical visualization reveals clear risk hotspots where multiple factors compound, particularly among older, obese individuals with sedentary or smoking lifestyles, while demonstrating protective effects of active living.",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Interactive Plot Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_Variable_Analysis.html#aggregated-parallel-coordinates-plot",
    "href": "CRC_Variable_Analysis.html#aggregated-parallel-coordinates-plot",
    "title": "Colorectal Cancer: Variable Analysis",
    "section": "Aggregated Parallel Coordinates plot",
    "text": "Aggregated Parallel Coordinates plot\n\n\nShow code\ncreate_aggregated_parallel_coordinates &lt;- function(data) {\n  \n  # Prepare data\n  parallel_data &lt;- data %&gt;%\n    mutate(\n      Risk_Status = ifelse(CRC_Risk == 1, \"CRC Risk\", \"No Risk\"),\n      Lifestyle_Numeric = case_when(\n        Lifestyle == \"Active\" ~ 1,\n        Lifestyle == \"Moderate Exercise\" ~ 2,\n        Lifestyle == \"Sedentary\" ~ 3,\n        Lifestyle == \"Smoker\" ~ 4\n      )\n    )\n  \n  # Calculate summary statistics for each risk group\n  vars_to_plot &lt;- c(\"Age\", \"BMI\", \"Vitamin_C\", \"Iron\", \"Proteins\", \"Carbohydrates\")\n  \n  # Normalize variables to 0-100 scale for comparison\n  normalized_data &lt;- parallel_data %&gt;%\n    mutate(across(all_of(vars_to_plot), \n                  ~scales::rescale(.x, to = c(0, 100)),\n                  .names = \"{.col}_norm\"))\n  \n  # Calculate quartiles for each group\n  summary_stats &lt;- normalized_data %&gt;%\n    group_by(Risk_Status) %&gt;%\n    summarise(\n      across(ends_with(\"_norm\"), \n             list(q25 = ~quantile(.x, 0.25),\n                  median = ~quantile(.x, 0.5),\n                  q75 = ~quantile(.x, 0.75)),\n             .names = \"{.col}_{.fn}\")\n    )\n  \n  # Create plot\n  fig &lt;- plot_ly()\n  \n  # Add quartile bands for No Risk group (green)\n  no_risk_stats &lt;- summary_stats %&gt;% filter(Risk_Status == \"No Risk\")\n  \n  for(i in 1:(length(vars_to_plot)-1)) {\n    var_current &lt;- paste0(vars_to_plot[i], \"_norm\")\n    var_next &lt;- paste0(vars_to_plot[i+1], \"_norm\")\n    \n    fig &lt;- fig %&gt;%\n      add_trace(\n        x = c(i, i+1, i+1, i),\n        y = c(no_risk_stats[[paste0(var_current, \"_q75\")]], \n              no_risk_stats[[paste0(var_next, \"_q75\")]],\n              no_risk_stats[[paste0(var_next, \"_q25\")]],\n              no_risk_stats[[paste0(var_current, \"_q25\")]]),\n        type = \"scatter\",\n        mode = \"lines\",\n        fill = \"toself\",\n        fillcolor = \"rgba(39, 174, 96, 0.2)\",\n        line = list(color = \"transparent\"),\n        showlegend = (i == 1),\n        name = \"No Risk Range\",\n        legendgroup = \"no_risk\",\n        hoverinfo = \"skip\"\n      )\n  }\n  \n  # Add median line for No Risk\n  median_x &lt;- 1:length(vars_to_plot)\n  median_y_no_risk &lt;- sapply(vars_to_plot, function(v) {\n    no_risk_stats[[paste0(v, \"_norm_median\")]]\n  })\n  \n  fig &lt;- fig %&gt;%\n    add_trace(\n      x = median_x,\n      y = median_y_no_risk,\n      type = \"scatter\",\n      mode = \"lines+markers\",\n      line = list(color = \"#27AE60\", width = 3),\n      marker = list(size = 8),\n      name = \"No Risk Median\",\n      legendgroup = \"no_risk\",\n      hovertemplate = \"%{y:.1f}&lt;extra&gt;&lt;/extra&gt;\"\n    )\n  \n  # Add quartile bands for CRC Risk group (red)\n  risk_stats &lt;- summary_stats %&gt;% filter(Risk_Status == \"CRC Risk\")\n  \n  for(i in 1:(length(vars_to_plot)-1)) {\n    var_current &lt;- paste0(vars_to_plot[i], \"_norm\")\n    var_next &lt;- paste0(vars_to_plot[i+1], \"_norm\")\n    \n    fig &lt;- fig %&gt;%\n      add_trace(\n        x = c(i, i+1, i+1, i),\n        y = c(risk_stats[[paste0(var_current, \"_q75\")]], \n              risk_stats[[paste0(var_next, \"_q75\")]],\n              risk_stats[[paste0(var_next, \"_q25\")]],\n              risk_stats[[paste0(var_current, \"_q25\")]]),\n        type = \"scatter\",\n        mode = \"lines\",\n        fill = \"toself\",\n        fillcolor = \"rgba(231, 76, 60, 0.2)\",\n        line = list(color = \"transparent\"),\n        showlegend = (i == 1),\n        name = \"CRC Risk Range\",\n        legendgroup = \"crc_risk\",\n        hoverinfo = \"skip\"\n      )\n  }\n  \n  # Add median line for CRC Risk\n  median_y_risk &lt;- sapply(vars_to_plot, function(v) {\n    risk_stats[[paste0(v, \"_norm_median\")]]\n  })\n  \n  fig &lt;- fig %&gt;%\n    add_trace(\n      x = median_x,\n      y = median_y_risk,\n      type = \"scatter\",\n      mode = \"lines+markers\",\n      line = list(color = \"#E74C3C\", width = 3),\n      marker = list(size = 8),\n      name = \"CRC Risk Median\",\n      legendgroup = \"crc_risk\",\n      hovertemplate = \"%{y:.1f}&lt;extra&gt;&lt;/extra&gt;\"\n    )\n  \n  # Layout\n  fig &lt;- fig %&gt;%\n    layout(\n      title = \"Aggregated Parallel Coordinates: Risk Group Patterns&lt;br&gt;&lt;sub&gt;Bands show 25th-75th percentile range | Lines show median values | All data used for calculation&lt;/sub&gt;\",\n      xaxis = list(\n        tickmode = \"array\",\n        tickvals = 1:length(vars_to_plot),\n        ticktext = vars_to_plot,\n        title = \"\"\n      ),\n      yaxis = list(\n        title = \"Normalized Value (0-100 scale)\",\n        range = c(-5, 105)\n      ),\n      hovermode = \"closest\",\n      legend = list(\n        orientation = \"v\",\n        x = 1.02,\n        y = 1,\n        xanchor = \"left\",\n        yanchor = \"top\",\n        bgcolor = \"rgba(255, 255, 255, 0.9)\",\n        bordercolor = \"#666\",\n        borderwidth = 1,\n        font = list(size = 11),\n        tracegroupgap = 15\n      ),\n      margin = list(t = 100, b = 80, l = 80, r = 150)\n    )\n  \n  return(fig)\n}\naggregated_parallel &lt;- create_aggregated_parallel_coordinates(data)\naggregated_parallel\n\n\n\n\n\n\nThis aggregated parallel coordinates visualization displays median nutritional and demographic profiles for two risk groups across six variables, with all values normalized to a zero to one hundred scale for comparison. The shaded bands represent the middle fifty percent of data (twenty-fifth to seventy-fifth percentile), while solid lines trace median values. The CRC risk group, shown in red, exhibits notably higher age and BMI values alongside lower Vitamin C intake compared to the no-risk group in green. This aggregation approach uses all one thousand participants to calculate statistics, providing clear group-level patterns without the visual clutter of individual data points, making differences between risk profiles immediately apparent.",
    "crumbs": [
      "Data Exploration",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Interactive Plot Analysis</span>"
    ]
  },
  {
    "objectID": "CRC_IML_Analysis.html",
    "href": "CRC_IML_Analysis.html",
    "title": "Colorectal Cancer: Interpretable Machine Learning Analysis",
    "section": "",
    "text": "Setup and Data Loading\n\n\nShow code\n# Load required libraries\nlibrary(tidyverse)      # Data manipulation and visualization\nlibrary(ggplot2)        # Advanced plotting\nlibrary(scales)         # Scale functions\nlibrary(viridis)        # Color palettes\nlibrary(pROC)           # ROC curves\nlibrary(randomForest)   # Random forest\nlibrary(caret)\nlibrary(rpart)         \nlibrary(rpart.plot) \nlibrary(vip)\n\n# Set theme for all plots\ntheme_set(theme_minimal(base_size = 12))\n\n\n\n\nShow code\n# Load the dataset\ndf &lt;- read_csv(\"data/crc_dataset.csv\", show_col_types = FALSE)\n\n\n\n\nLogistic Regression\n\n\nShow code\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(broom)\nlibrary(kableExtra)\n\n# Prepare data with STANDARDIZED predictors\ndf_model_std &lt;- df |&gt;\n  mutate(\n    Gender_numeric = ifelse(Gender == \"Male\", 1, 0),\n    Lifestyle_Active = ifelse(Lifestyle == \"Active\", 1, 0),\n    Lifestyle_Moderate = ifelse(Lifestyle == \"Moderate Exercise\", 1, 0),\n    Lifestyle_Smoker = ifelse(Lifestyle == \"Smoker\", 1, 0),\n    Family_History_numeric = ifelse(Family_History_CRC == \"Yes\", 1, 0)\n  ) |&gt;\n  mutate(\n    # Standardize continuous variables (mean=0, sd=1)\n    Age_std = scale(Age)[,1],\n    BMI_std = scale(BMI)[,1],\n    Carbs_std = scale(`Carbohydrates (g)`)[,1],\n    Protein_std = scale(`Proteins (g)`)[,1],\n    Fats_std = scale(`Fats (g)`)[,1],\n    VitA_std = scale(`Vitamin A (IU)`)[,1],\n    VitC_std = scale(`Vitamin C (mg)`)[,1],\n    Iron_std = scale(`Iron (mg)`)[,1]\n  )\n\n# Build standardized logistic regression model\nmodel_logistic_std &lt;- glm(CRC_Risk ~ Age_std + BMI_std + Gender_numeric + \n                           Lifestyle_Active + Lifestyle_Moderate + Lifestyle_Smoker +\n                           Family_History_numeric +\n                           Carbs_std + Protein_std + Fats_std +\n                           VitA_std + VitC_std + Iron_std,\n                          data = df_model_std,\n                          family = binomial(link = \"logit\"))\n\n# Extract coefficients\ncoef_std_df &lt;- tidy(model_logistic_std, conf.int = TRUE) |&gt;\n  arrange(desc(abs(estimate))) |&gt;\n  mutate(\n    Significant = ifelse(p.value &lt; 0.05, \"Yes\", \"No\"),\n    OR = exp(estimate),\n    OR_lower = exp(conf.low),\n    OR_upper = exp(conf.high)\n  )\n\nkable(coef_std_df |&gt; select(term, estimate, OR, OR_lower, OR_upper, p.value, Significant), \n      digits = 4,\n      caption = \"Standardized Logistic Regression Coefficients\") |&gt;\n  kable_styling(bootstrap_options = c(\"striped\", \"hover\"))\n\n\n\nStandardized Logistic Regression Coefficients\n\n\nterm\nestimate\nOR\nOR_lower\nOR_upper\np.value\nSignificant\n\n\n\n\n(Intercept)\n-4.9904\n0.0068\n0.0028\n0.0151\n0.0000\nYes\n\n\nLifestyle_Smoker\n3.2412\n25.5643\n12.7319\n55.2407\n0.0000\nYes\n\n\nFamily_History_numeric\n2.1213\n8.3416\n5.0103\n14.4116\n0.0000\nYes\n\n\nBMI_std\n1.3210\n3.7473\n2.8625\n5.0100\n0.0000\nYes\n\n\nAge_std\n0.7701\n2.1600\n1.7036\n2.7734\n0.0000\nYes\n\n\nLifestyle_Active\n0.6238\n1.8660\n0.8720\n4.1061\n0.1126\nNo\n\n\nLifestyle_Moderate\n0.3496\n1.4184\n0.6488\n3.1672\n0.3847\nNo\n\n\nGender_numeric\n-0.1815\n0.8340\n0.5335\n1.3005\n0.4238\nNo\n\n\nProtein_std\n-0.1540\n0.8573\n0.6832\n1.0730\n0.1803\nNo\n\n\nFats_std\n0.1269\n1.1353\n0.9097\n1.4196\n0.2627\nNo\n\n\nVitC_std\n0.1238\n1.1318\n0.9057\n1.4173\n0.2775\nNo\n\n\nIron_std\n-0.1028\n0.9023\n0.7243\n1.1228\n0.3569\nNo\n\n\nCarbs_std\n-0.0247\n0.9756\n0.7807\n1.2194\n0.8280\nNo\n\n\nVitA_std\n-0.0132\n0.9869\n0.7923\n1.2286\n0.9059\nNo\n\n\n\n\n\n\n\nShow code\ncoef_std_df |&gt;\n  filter(term != \"(Intercept)\") |&gt;\n  mutate(term = fct_reorder(term, estimate)) |&gt;\n  ggplot(aes(x = estimate, y = term, color = Significant)) +\n  geom_vline(xintercept = 0, linetype = \"dashed\", color = \"gray50\") +\n  geom_point(size = 4) +\n  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high), height = 0.3, linewidth = 1) +\n  scale_color_manual(values = c(\"No\" = \"gray60\", \"Yes\" = \"#e74c3c\")) +\n  labs(title = \"Standardized Logistic Regression Coefficients with 95% CI\",\n       x = \"Standardized Coefficient (log odds per SD increase)\", \n       y = \"Variable\",\n       color = \"Significant\\n(p &lt; 0.05)\") +\n  theme_minimal() +\n  theme(plot.title = element_text(face = \"bold\", size = 14),\n        plot.subtitle = element_text(color = \"darkgreen\", face = \"italic\"),\n        legend.position = \"right\",\n        axis.text.y = element_text(size = 10))\n\n\n\n\n\n\n\n\nFigure 8.1: Standardized Logistic Regression Coefficients (Comparable Scale)\n\n\n\n\n\nThe standardized coefficient plot highlights the strongest predictors of CRC Risk after placing all variables on a comparable scale. Lifestyle_Smoker emerges as the strongest positive predictor, with smoking substantially increasing the odds of being at CRC risk. Family_History_numeric also shows a strong and significant positive effect, indicating that individuals with a family history of colorectal cancer are meaningfully more likely to be classified as at risk. BMI_std and Age_std both have significant positive contributions as well, showing that higher BMI and older age modestly but consistently elevate risk.\nIn contrast, dietary variables such as Carbs_std, Protein_std, Fats_std, VitA_std, VitC_std, and Iron_std exhibit coefficients close to zero with wide confidence intervals, suggesting no meaningful linear association with CRC Risk in the logistic framework. Lifestyle_Active and Lifestyle_Moderate appear protective but are not statistically significant. Overall, lifestyle and family history dominate the effect size profile, while nutrient intake plays a minimal role in the logistic model.\n\n\nShow code\ndf_ml &lt;- df |&gt;\n  mutate(across(where(is.character), as.factor)) |&gt;        \n  mutate(across(where(is.factor), ~ as.numeric(as.factor(.)))) |&gt;  \n  select(-Participant_ID)\n\nset.seed(123)\nsplit &lt;- createDataPartition(df_ml$CRC_Risk, p = 0.8, list = FALSE)\ntrain &lt;- df_ml[split, ]\ntest &lt;- df_ml[-split, ]\n\n\n\n\nDecision Tree\n\n\nShow code\ntree_model &lt;- rpart(CRC_Risk ~ ., data = train, method = \"class\")\nrpart.plot(tree_model, extra = 104, under = TRUE, faclen = 0)\n\n\n\n\n\n\n\n\n\nThe decision tree provides a rule-based view of the risk classification and reveals the hierarchical structure the model learns. The very first split occurs on Lifestyle, showing it is the most discriminative variable. Individuals with a less healthy lifestyle branch (≥ 4) tend to be directed toward at-risk classifications further down the tree.\nFor those on the healthier lifestyle path, BMI &lt; 30 becomes the next major decision point, highlighting BMI as an important threshold predictor. Additional splits on Family_History_CRC and Age reflect their importance — younger individuals and those without a family history are more often classified into the no-risk category.\nOn the other side of the tree, splits on Ethnicity, Vitamin A intake, and Fats intake appear, but they contribute much less to prediction accuracy. Pre-existing Conditions also appears, but only as a shallow split, meaning its predictive power is limited. Overall, the structure mirrors the logistic regression results: lifestyle, BMI, family history, and age drive nearly all classification decisions.\n\n\nShow code\nvip(tree_model, num_features = 10)\n\n\n\n\n\n\n\n\n\nThe variable importance plot reinforces the hierarchy observed in the tree. Age is the most important single predictor, followed closely by Lifestyle and Family_History_CRC. BMI also ranks highly, confirming its role as a key threshold-based predictor. Vitamin A and Iron show moderate importance, which reflects their occasional appearance in the tree splits but not with strong predictive power.\nPre-existing Conditions, Ethnicity, and macronutrient variables such as Fats and Proteins appear much lower on the scale, indicating limited contribution to the tree’s predictive performance. The ranking makes it clear that demographic and behavioral factors far outweigh nutritional factors in their influence on CRC classification.\n\n\nShow code\nlibrary(pdp)\nlibrary(dplyr)\nlibrary(ggplot2)\n\n# Numeric predictors for PDP (exclude outcome)\nnum_vars &lt;- setdiff(\n  names(train)[sapply(train, is.numeric)],\n  \"CRC_Risk\"\n)\n\n# Compute partial dependence for each numeric predictor using the decision tree\npd_tree &lt;- bind_rows(lapply(num_vars, function(v) {\n  p &lt;- partial(\n    tree_model,\n    pred.var    = v,\n    train       = train,\n    prob        = TRUE,\n    which.class = \"1\"   # assumes class \"1\" = at-risk; change if needed\n  )\n  tibble(\n    x        = p[[v]],\n    yhat     = p$yhat,\n    variable = v\n  )\n}))\n\n# Order variables by variability in their PDP curves\nsd_tree &lt;- sort(tapply(pd_tree$yhat, pd_tree$variable, sd), decreasing = TRUE)\npd_tree$variable &lt;- factor(pd_tree$variable, levels = names(sd_tree))\n\n# Plot PDPs\nggplot(pd_tree, aes(x = x, y = yhat)) +\n  geom_line() +\n  facet_wrap(~ variable, scales = \"free_x\") +\n  labs(\n    x     = \"Predictor value\",\n    y     = \"Predicted P(CRC_Risk = 1)\",\n    title = \"Partial Dependence Plots (Decision Tree)\"\n  ) +\n  theme_bw()\n\n\n\n\n\n\n\n\n\nLifestyle: Risk probability increases sharply at higher lifestyle codes, confirming that smoking or sedentary lifestyles considerably elevate CRC risk.\nBMI: There is a steep jump in predicted CRC risk once BMI exceeds ~30, indicating a learned threshold effect consistent with clinical understanding of obesity as a risk factor.\nFamily_History_CRC:Risk steadily increases with higher family history values, showing a nearly linear relationship and reinforcing its strong model importance.\nAge: Risk increases around age 55 and then plateaus, capturing a midlife threshold beyond which the model associates age with increased likelihood of CRC risk.\nEthnicity: A small upward trend appears across ethnic categories, but the overall probability change is modest; ethnicity is not a strong standalone predictor.\nVitamin A (IU): Risk forms a shallow hump around mid-range Vitamin A values but varies only slightly, showing weak influence.\nPre-existing Conditions:Risk decreases very slightly as pre-existing condition count rises, but overall variation is minimal; the model does not rely heavily on this feature.\nProteins (g): A minor dip appears around higher protein intake levels, but risk probabilities remain nearly flat, suggesting negligible effect.\nFats (g): Risk shows a tiny increase when fats exceed ~50 g but stays nearly constant afterward — again confirming very low predictive contribution.\nCarbohydrates (g): Carbs have no meaningful effect on predicted CRC risk in the tree model.\nGender: Prediction remains flat across genders, indicating no tree-based discrimination.\nIron (mg): Slight monotonic rise, but overall risk probabilities remain low iron is not an important determinant.\nVitamin C (mg): Vitamin C has no zero predictive influence.\n\n\nConclusion\nAcross all interpretability methods — logistic regression, decision tree structure, variable importance, and partial dependence — the findings are consistent and robust. Behavioral and demographic variables, particularly Lifestyle, Age, BMI, and Family History of CRC, emerge as the dominant predictors of colorectal cancer risk. Logistic regression identifies strong positive effects for smoking, higher BMI, older age, and family history, while nutritional intake variables contribute minimally. The decision tree further emphasizes the primacy of lifestyle and BMI through its top-level splits, and the variable importance plot quantifies the dominance of demographic factors over dietary ones. Partial dependence plots show clear threshold effects for BMI and age, while diet-related predictors show almost no meaningful change in risk across intake levels. Collectively, this analysis suggests that in this dataset, CRC risk is driven far more by lifestyle and personal/family medical history than by macronutrient or micronutrient consumption patterns.",
    "crumbs": [
      "Advanced Analysis",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Interpretable Machine Learning</span>"
    ]
  },
  {
    "objectID": "interactive_parallel_coords.html",
    "href": "interactive_parallel_coords.html",
    "title": "Interactive Parallel Coordinates Plot",
    "section": "",
    "text": "This interactive parallel coordinates visualization displays all one thousand participants as lines threading through multiple variable axes, with color indicating cancer risk status (green for no risk, red for CRC risk). Users can dynamically select which variables to display by clicking the toggle buttons above the plot, with four to six variables recommended for optimal clarity. The opacity slider controls line transparency, allowing users to reduce visual clutter by making lines more transparent to reveal aggregate patterns. The key interactive feature involves dragging vertically on any axis to filter specific value ranges, instantly highlighting only participants matching those criteria. This filtering capability transforms the dense visualization into a powerful exploratory tool for identifying multivariate patterns.\n\n Launch Interactive Visualization",
    "crumbs": [
      "Interactive Tools",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Interactive Parallel Coordinates Plot</span>"
    ]
  },
  {
    "objectID": "risk_prediction.html",
    "href": "risk_prediction.html",
    "title": "CRC Risk Prediction Calculator",
    "section": "",
    "text": "This interactive risk prediction tool uses a logistic regression model trained on patient data to estimate colorectal cancer risk based on your personal health profile. The calculator considers multiple factors including demographic information, lifestyle patterns, nutritional intake, and medical history to provide a comprehensive risk assessment.\n1.⁠ ⁠Risk Gauge (Indicator Plot) A plotly indicator visualization displaying predicted CRC risk probability with three-zone color mapping (0-30%: green, 30-70%: yellow, 70-100%: red) and delta reference to 50% classification threshold. Provides immediate risk level identification.\n2.⁠ ⁠Distance from Healthy Ranges (Bar Chart) Quantitative assessment of feature deviations from evidence-based healthy ranges (USDA 2020-2025, NIH RDAs). Calculated as ((user_value - healthy_threshold) / healthy_threshold) × 100. Threshold-based color coding (±20%) prioritizes interventions.\n3.⁠ ⁠Risk Prediction Simulator (Interactive Widget) Real-time prediction recalculation engine using logistic regression model. Accepts single-feature modifications and outputs: baseline risk, simulated risk, absolute change (Δ%), relative change (Δ%/baseline), and impact classification. Enables counterfactual analysis.\n4.⁠ ⁠Risk Contribution Breakdown (Pie Chart) Additive risk decomposition using formula: Contribution_i = |((x_i - μ_i) × β_i)| / Σ|contributions|. Visualizes relative importance of each feature in individual risk profile, normalized to percentages for interpretability.\n5.⁠ ⁠Risk Trajectory (Time Series Plot) Temporal visualization of predicted risk across t prediction sessions with dynamic y-axis scaling: range = [max(0, min(risk) - 10), min(100, max(risk) + 10)]. Trend classification (improving/increasing/stable) based on first-to-last comparison with color-coded title.\n6.⁠ ⁠Low-Risk Profile Comparison (Grouped Bar Chart) Normalized (z-scored) comparison of user features against empirical low-risk population medians (n=845, 84.5% of cohort). Normalization formula: z = (x - μ) / σ. Enables cross-feature comparison and goal-setting based on population benchmarks.\nEnter your information in the form on the left, and the tool will generate a personalized risk score along with detailed visualizations showing how different factors contribute to your overall risk. The what-if simulator allows you to explore how changing specific values might affect your risk profile, helping you understand which lifestyle modifications could have the greatest impact.\n\n Launch Risk Calculator",
    "crumbs": [
      "Interactive Tools",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Risk Predictor Model</span>"
    ]
  },
  {
    "objectID": "conclusion.html",
    "href": "conclusion.html",
    "title": "Conclusion",
    "section": "",
    "text": "This project successfully demonstrated how combining interactive data visualization with interpretable machine learning transforms complex multivariate health data into actionable insights about colorectal cancer risk factors. Through analysis of over one thousand real patient records, we employed both exploratory visualization techniques and statistical modeling to identify key patterns and validate findings across multiple methodological approaches.\nOur analysis revealed that colorectal cancer risk emerges primarily from modifiable lifestyle factors rather than isolated demographic or nutritional variables. Smoking behavior emerged as the single strongest predictor across all analytical approaches, with logistic regression showing a standardized coefficient of approximately 3.5 and decision tree analysis placing lifestyle patterns at the root node. This finding, validated through multiple independent methods, suggests that smoking cessation programs could have substantial population-level impact on cancer prevention. Family history consistently ranked as the second most important factor, acting as a risk amplifier that doubles baseline risk across all lifestyle categories, though our interactive visualizations revealed that active individuals with family history still show lower risk than sedentary individuals without genetic predisposition.\nThe parallel coordinates visualization proved particularly effective for uncovering multivariate patterns, allowing dynamic exploration of relationships that would require dozens of static charts to capture. The BMI-lifestyle heatmap revealed critical interaction effects, showing that obesity combined with smoking creates the deadliest risk profile at fifty-three percent, while physical activity provides substantial protection even at higher body weights. These interactive tools transformed passive observation into active discovery, enabling users to identify high-risk profiles and understand how individual variables interact within broader health contexts.\nSurprisingly, dietary micronutrients showed minimal direct association with cancer risk in our statistical models, despite clear nutritional differences between risk groups visible in our visualizations. While the at-risk group showed substantially lower intake of Vitamin C and Iron in exploratory plots, these factors did not achieve statistical significance in regression analysis, suggesting that diet may influence cancer risk primarily through indirect pathways such as BMI and metabolic effects rather than through direct mechanisms. This finding challenges common assumptions about diet and cancer, indicating that lifestyle modification and appropriate screening should be prioritized over dietary supplementation for cancer prevention.\nThe technical architecture we developed, combining static GitHub Pages hosting with cloud-hosted Shiny applications, offers a practical model for projects requiring both narrative documentation and computational interactivity. The risk prediction calculator extended our analytical framework beyond pattern recognition to personalized assessment, with the what-if simulator enabling users to explore how lifestyle modifications might alter their risk profile. This interactive capability shifts focus from static diagnosis to dynamic planning, empowering individuals to make informed preventive decisions.\nSeveral limitations merit acknowledgment. The cross-sectional design cannot establish causality, and single-point dietary assessments may not capture long-term nutritional patterns. The logistic regression model, while interpretable, represents a simplified approach compared to more sophisticated machine learning methods that could capture non-linear relationships. Future work could incorporate longitudinal data to establish temporal relationships, integrate polygenic risk scores for enhanced prediction, and validate findings across diverse populations.\nThis project reinforced that effective health communication requires more than accurate information presentation; it demands interactive tools enabling personalized exploration and supporting decision-making processes. By combining thoughtful visualization design with interpretable machine learning, we created an analytical environment where users can ask questions, test hypotheses, and develop personalized understanding of complex health relationships. The convergence of findings across multiple methodologies strengthens confidence that identified risk factors reflect genuine associations, offering evidence-based guidance for both clinical practice and public health interventions.",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Conclusion</span>"
    ]
  }
]